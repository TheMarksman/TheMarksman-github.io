{"version":3,"sources":["info-panel.js"],"names":["InfoPanel","regionAttribute","iconList","dispatcher","d3","dispatch","colorScheme","scale","category10","iconGenerator","icon","info","selection","each","clickUpdate","d","selectedNode","name","container","style","opacity","updatePanel","overUpdate","outUpdate","datum","color","panel","border-color","box-shadow","updateHeader","updateBody","header","text","updateDescription","updateProjectName","updateOrganizationName","updateCodeLocation","updateFirstReleased","updateLastUpdate","updateLanguageLicense","updateOS","description","projectName","organizationName","organization","codeLocation","html","releasedLocation","startDate","toLocaleDateString","updateLocation","lastUpdate","languages","_","map","language","lang","label","iconClass","find","src","numberOfLanguages","length","license","llContainer","select","selectAll","remove","licenseGroup","append","attr","class","classed","row text-center icon-sizer","row text-center","row text-center license-label","languageContainer","forEach","languageGroup","row text-center language-label","os","s","numberOfOs","osIconContainer","system","group","this","panel panel-default info-panel","panel-heading","body","info-body panel-body","container-fluid","projectNameContainer","project-name-container","row","project-name-label nopadding col-xs-5","project-name nopadding col-xs-7","organizationContainer","organization-container","organization-label nopadding col-xs-5","organization-name nopadding col-xs-7","codeContainer","code-container","code-label nopadding col-xs-5","code-location nopadding col-xs-7","word-wrap","releasedContainer","released-container","released-label nopadding col-xs-5","released-location nopadding col-xs-7","updateContainer","update-container","update-label nopadding col-xs-5","update-location nopadding col-xs-7","languageLicenseContainer","language-license-container","osContainer","row language-license-icon-container","os-container","row os-icon-container","os-label text-center","on","value","arguments"],"mappings":"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","file":"info-panel.min.js","sourcesContent":["\nvar InfoPanel = function() {\n    var dispatcher = d3.dispatch(\"mouseOverNode\", \"mouseOutNode\"),\n        colorScheme = d3.scale.category10(),\n        regionAttribute,\n        iconGenerator = function(icon) { return \"icon-host-\" + icon;  },\n        iconList;\n\n    var info = function(selection) {\n        selection.each(function(data) {\n            var container = d3.select(this),\n                selectedNode;\n\n            container.style({opacity: 0});\n\n            var panel = container.append(\"div\")\n                .classed({\"panel panel-default info-panel\": 1});\n\n            var header = panel.append(\"div\")\n                .classed({\"panel-heading\": 1})\n                .append(\"h4\");\n\n            var body = panel.append(\"div\")\n                .classed({\"info-body panel-body\": 1})\n                    .append(\"div\")\n                        .classed({\"container-fluid\": 1});\n\n            var description = body.append(\"div\")\n                .classed({description: 1});\n\n            var projectNameContainer = body.append(\"div\")\n                .classed({\"project-name-container\": 1})\n                .append(\"div\")\n                    .classed({\"row\": 1});\n\n            projectNameContainer.append(\"span\")\n                .classed({\"project-name-label nopadding col-xs-5\": 1})\n                .text(\"DHS Project Name: \");\n\n            var projectName = projectNameContainer.append(\"span\")\n                .classed({\"project-name nopadding col-xs-7\": 1});\n\n            var organizationContainer = body.append(\"div\")\n                .classed({\"organization-container\": 1})\n                .append(\"div\")\n                    .classed({\"row\": 1});\n\n            organizationContainer.append(\"span\")\n                .classed({\"organization-label nopadding col-xs-5\": 1})\n                .text(\"Organization: \");\n\n            var organizationName = organizationContainer.append(\"span\")\n                .classed({\"organization-name nopadding col-xs-7\": 1});\n\n            var codeContainer = body.append(\"div\")\n                .classed({\"code-container\": 1})\n                .append(\"div\")\n                    .classed({\"row\": 1});\n\n            codeContainer.append(\"span\")\n                .classed({\"code-label nopadding col-xs-5\": 1})\n                .text(\"Code: \");\n\n            var codeLocation = codeContainer.append(\"div\")\n                .classed({\"code-location nopadding col-xs-7\": 1})\n                .style({ \"word-wrap\": \"break-word\"});\n\n            var releasedContainer = body.append(\"div\")\n                .classed({\"released-container\": 1})\n                .append(\"div\")\n                    .classed({\"row\": 1});\n\n            releasedContainer.append(\"span\")\n                .classed({\"released-label nopadding col-xs-5\": 1})\n                .text(\"First Released: \");\n\n            var releasedLocation = releasedContainer.append(\"span\")\n                .classed({\"released-location nopadding col-xs-7\": 1});\n\n            var updateContainer = body.append(\"div\")\n                .classed({\"update-container\": 1})\n                .append(\"div\")\n                    .classed({\"row\": 1});\n\n            updateContainer.append(\"span\")\n                .classed({\"update-label nopadding col-xs-5\": 1})\n                .text(\"Last Update: \");\n\n            var updateLocation = updateContainer.append(\"span\")\n                .classed({\"update-location nopadding col-xs-7\": 1});\n\n            var languageLicenseContainer = body.append(\"div\")\n                .classed({\"language-license-container\": 1})\n                .append(\"div\")\n                    .classed({\"row\": 1});\n\n            var languageLicenseIconContainer = languageLicenseContainer.append(\"div\")\n                .classed({\"row language-license-icon-container\": 1});\n\n            var osContainer = body.append(\"div\")\n                .classed({\"os-container\": 1})\n                .append(\"div\")\n                    .classed({\"row\": 1});\n\n            var osIconContainer = osContainer.append(\"div\")\n                .classed({\"row os-icon-container\": 1});\n\n            osContainer.append(\"div\")\n                .classed({\"os-label text-center\": 1})\n                .text(\"Operating Systems\");\n\n            dispatcher.on(\"selectedNode.panel\", clickUpdate);\n            dispatcher.on(\"mouseOverNode\", overUpdate);\n            dispatcher.on(\"mouseOutNode\", outUpdate);\n\n            function clickUpdate(d) {\n                // Node is unclicked\n                if (selectedNode && selectedNode.name === d.name) {\n                    selectedNode = null;\n                    container.style({opacity: 0});\n                } else {\n                    selectedNode = d;\n                    updatePanel(selectedNode);\n                }\n            }\n\n            function overUpdate(d) {\n                updatePanel(d);\n            }\n\n            function outUpdate() {\n                if (selectedNode) {\n                    updatePanel(selectedNode);\n                } else {\n                    container.style({opacity: 0});\n                }\n            }\n\n            function updatePanel(datum) {\n                container.style({opacity: 1});\n                var color = colorScheme(datum[regionAttribute]);\n                panel.style({\n                    \"border-color\": color,\n                    \"box-shadow\": function() {\n                        return \"0 1px 6px 0 \" + color + \", 0 1px 6px 0\" + color;\n                    }\n                });\n                updateHeader(datum);\n                updateBody(datum);\n            }\n\n            function updateHeader(datum) {\n                header\n                    .style({\n                        color: colorScheme(datum[regionAttribute])\n                    })\n                    .text(datum.name);\n            }\n\n            function updateBody(datum) {\n                updateDescription(datum);\n                updateProjectName(datum);\n                updateOrganizationName(datum);\n                updateCodeLocation(datum);\n                updateFirstReleased(datum);\n                updateLastUpdate(datum);\n                updateLanguageLicense(datum);\n                updateOS(datum);\n            }\n\n            function updateDescription(datum) {\n                description.text(function() {\n                    return datum.description || '';\n                });\n            }\n\n            function updateProjectName(datum) {\n                projectName.text(datum.projectName);\n            }\n\n            function updateOrganizationName(datum) {\n                organizationName.text(datum.organization);\n            }\n\n            function updateCodeLocation(datum) {\n                codeLocation.html(\n                    \"<a href='\" + datum.codeLocation + \"'>\" +\n                        datum.codeLocation + \"</a>\"\n                );\n            }\n\n            function updateFirstReleased(datum) {\n                releasedLocation.text(\n                    datum.startDate.toLocaleDateString() + \"*\");\n            }\n\n            function updateLastUpdate(datum) {\n                updateLocation.text(\n                    datum.lastUpdate.toLocaleDateString()+ \"*\"\n                );\n            }\n\n            function updateLanguageLicense(datum) {\n                var languages = _.map(datum.language, function(lang) {\n                    return {\n                        label: lang,\n                        iconClass: iconGenerator(\n                            _.find(iconList.languages, {label: lang}).src\n                        )\n                    };\n                }),\n                numberOfLanguages = languages.length;\n\n                var license = {\n                    label: datum.license,\n                    iconClass: iconGenerator(\n                        _.find(iconList.license, {label: datum.license}).src\n                    )\n                };\n\n                var llContainer = container.select(\".language-license-icon-container\");\n\n                llContainer.selectAll(\"*\").remove();\n\n                var licenseGroup = llContainer.append(\"div\")\n                    .attr({\n                        class: function() {\n                            return \"col-xs-\" + (12 / (numberOfLanguages + 1));\n                        }\n                    });\n\n                licenseGroup.append(\"div\")\n                    .classed({\"row text-center icon-sizer\": 1})\n                    .append(\"span\")\n                        .attr({\n                            class: license.iconClass\n                        });\n\n                licenseGroup.append(\"div\")\n                    .classed({\"row text-center\": 1})\n                    .append(\"span\")\n                        .text(license.label);\n\n                licenseGroup.append(\"div\")\n                    .classed({\"row text-center license-label\": 1})\n                    .append(\"span\")\n                        .text(\"License\");\n\n                var languageContainer = llContainer.append(\"div\")\n                    .attr({\n                        class: function() {\n                            return \"col-xs-\" + (numberOfLanguages * 12 /\n                                (numberOfLanguages + 1));\n                        }\n                    });\n\n                _.forEach(languages, function(language) {\n                    var languageGroup = languageContainer.append(\"div\")\n                        .attr({\n                            class: function() {\n                                return \"col-xs-\" + (12 / numberOfLanguages);\n                            }\n                        });\n\n                    languageGroup.append(\"div\")\n                        .classed({\"row text-center icon-sizer\": 1})\n                        .append(\"span\")\n                            .attr({ class:language.iconClass });\n\n                    languageGroup.append(\"div\")\n                        .classed({\"row text-center\": 1})\n                        .append(\"span\")\n                            .text(language.label);\n                });\n\n                languageContainer.append(\"div\")\n                    .classed({\"row text-center language-label\": 1})\n                    .append(\"span\")\n                        .text(\"Languages\");\n            }\n\n            function updateOS(datum) {\n\n                var os = _.map(datum.os, function(s) {\n                    return {\n                        label: s,\n                        iconClass: iconGenerator(_.find(iconList.os, { label: s}).src)\n                    };\n                }),\n                numberOfOs = os.length;\n\n                var osIconContainer = container.select(\".os-icon-container\");\n\n                osIconContainer.selectAll(\"*\").remove();\n\n                _.forEach(os, function(system) {\n                    var group = osIconContainer.append(\"div\")\n                        .attr({\n                            class: function() {\n                                return \"col-xs-\" + (12 / numberOfOs);\n                            }\n                        });\n\n                    group.append(\"div\")\n                        .classed({\"row text-center icon-sizer\": 1})\n                        .append(\"span\")\n                            .attr({\n                                class: system.iconClass\n                            });\n\n                    group.append(\"div\")\n                        .classed({\"row text-center\": 1})\n                        .append(\"span\")\n                            .text(system.label);\n\n                });\n            }\n        });\n\n    };\n\n    info.dispatcher = function(value) {\n        if (!arguments.length) return dispatcher;\n        dispatcher = value;\n        return info;\n    };\n\n    info.colorScheme = function(value) {\n        if (!arguments.length) return colorScheme;\n        colorScheme = value;\n        return info;\n    };\n\n    info.regionAttribute = function(value) {\n        if (!arguments.length) return regionAttribute;\n        regionAttribute = value;\n        return info;\n    };\n\n    info.iconList = function(value) {\n        if (!arguments.length) return iconList;\n        iconList = value;\n        return info;\n    };\n\n    return info;\n};"],"sourceRoot":"/source/"}