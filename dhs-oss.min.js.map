{"version":3,"sources":["dhs-oss.js"],"names":["VizGenerator","chartSelector","infoSelector","config","dispatch","d3","filters","license","os","all","others","colorScheme","scale","ordinal","domain","range","api","selection","buttonFilterWrapper","filterOn","option","isChecked","value","$","val","push","toLowerCase","_","remove","filter","filterUpdate","inputFieldWrapper","inputBox","property","domainBtn","select","timelineBtn","clearFilterBtn","clearedFilter","cloneDeep","chart","Chart","regionAttribute","dispatcher","info","datum","call","InfoPanel","iconList","icons","multiselect","nonSelectedText","buttonWidth","onChange","$input","node","typeahead","source","afterSelect","on","classed","btn-primary","drawDomain","drawTimeline","selectAll","d","hash","kebabCase","name","location","selectedNode","data","initialHashCheck","window","arguments","length","selector"],"mappings":"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","file":"dhs-oss.min.js","sourcesContent":["/*\r\n    Main file interfacing between all the different visualization components.\r\n */\r\n\r\nvar VizGenerator = function() {\r\n    var dispatch = d3.dispatch('drawDomain',\r\n                               'drawTimeline',\r\n                               'filterUpdate',\r\n                               'mouseOverNode',\r\n                               'mouseOutNode',\r\n                               'selectedNode'),\r\n        chartSelector,\r\n        infoSelector,\r\n        config,\r\n        filters = {\r\n            license: [],\r\n            os: [],\r\n            all: '',\r\n            others: []\r\n        },\r\n        colorScheme = d3.scale.ordinal()\r\n                        .domain(['Architecture',\r\n                                 'Network Security',\r\n                                 'Situational Awareness',\r\n                                 'Forensics',\r\n                                 'Framework',\r\n                                 'Software Assurance'\r\n                        ])\r\n                        .range(['#4d6162',\r\n                                '#0f7572',\r\n                                '#779d9d',\r\n                                '#223242',\r\n                                '#666976',\r\n                                '#bebec4']);\r\n\r\n    var api = function(selection) {\r\n        var domainBtn = d3.select('.btn-domain'),\r\n            timelineBtn = d3.select('.btn-timeline'),\r\n            clearFilterBtn = d3.select('.btn-clear-filter'),\r\n            clearedFilter = _.cloneDeep(filters);\r\n\r\n        var chart = Chart()\r\n            .regionAttribute(config.regionAttribute)\r\n            .colorScheme(colorScheme)\r\n            .dispatcher(dispatch);\r\n\r\n        var _vis = selection.select(chartSelector)\r\n            .datum(selection.datum())\r\n            .call(chart);\r\n\r\n        var info = InfoPanel()\r\n            .regionAttribute(config.regionAttribute)\r\n            .iconList(config.icons)\r\n            .colorScheme(colorScheme)\r\n            .dispatcher(dispatch);\r\n\r\n        var _infoPanel = selection.select(infoSelector)\r\n            .datum(selection.datum())\r\n            .call(info);\r\n\r\n        $('.license-select').multiselect({\r\n            nonSelectedText: 'License',\r\n            buttonWidth: '140px',\r\n            onChange: buttonFilterWrapper('license')\r\n        });\r\n\r\n        $('.os-select').multiselect({\r\n          nonSelectedText: 'Operating System',\r\n          buttonWidth: '150px',\r\n          onChange: buttonFilterWrapper('os')\r\n        });\r\n\r\n        function buttonFilterWrapper(filterOn) {\r\n            return function (option, isChecked) {\r\n                var value = $(option).val();\r\n\r\n                if (isChecked) {\r\n                    filters[filterOn].push(value.toLowerCase());\r\n                } else {\r\n                    _.remove(filters[filterOn], function(filter) {\r\n                        return filter === value.toLowerCase();\r\n                    });\r\n                }\r\n\r\n                dispatch.filterUpdate(filters);\r\n            };\r\n        }\r\n\r\n        var inputBox = d3.select('.input-keyword');\r\n\r\n            var $input = $(inputBox.node());\r\n            $input.typeahead({\r\n                source: selection.datum(),\r\n                afterSelect: inputFieldWrapper\r\n            });\r\n\r\n        inputBox.on('input', inputFieldWrapper);\r\n\r\n        function inputFieldWrapper() {\r\n            var val = inputBox.property('value').toLowerCase();\r\n\r\n            filters.all = val;\r\n\r\n            dispatch.filterUpdate(filters, 'all');\r\n        }\r\n\r\n        domainBtn.classed({'btn-primary': 1});\r\n\r\n        domainBtn.on('click', function() {\r\n            timelineBtn.classed({'btn-primary': 0});\r\n            domainBtn.classed({'btn-primary': 1});\r\n            dispatch.drawDomain();\r\n        });\r\n\r\n        timelineBtn.on('click', function() {\r\n            timelineBtn.classed({'btn-primary': 1});\r\n            domainBtn.classed({'btn-primary': 0});\r\n            dispatch.drawTimeline();\r\n        });\r\n\r\n        clearFilterBtn.on('click', function() {\r\n            filters = _.cloneDeep(clearedFilter);\r\n\r\n            $('.input-keyword').val('');\r\n\r\n            $('.os-select').multiselect('deselectAll', false);\r\n            $('.os-select').multiselect('updateButtonText');\r\n\r\n            $('.license-select').multiselect('deselectAll', false);\r\n            $('.license-select').multiselect('updateButtonText');\r\n\r\n            dispatch.filterUpdate(filters);\r\n        });\r\n\r\n        d3.selectAll(\".node\").on(\"click\", function(d) {\r\n            var hash =  \"#\" + _.kebabCase(d.name);\r\n\r\n\r\n            if (location.hash === hash) {\r\n                dispatch.selectedNode(d3.select(location.hash).data()[0]);\r\n                location.hash = \"#\";\r\n            } else {\r\n                location.hash = hash;\r\n                dispatch.selectedNode(d3.select(location.hash).data()[0]);\r\n            }\r\n        });\r\n\r\n\r\n        var initialHashCheck = function() {\r\n            if (location.hash && location.hash !== \"#\") {\r\n                dispatch.selectedNode(d3.select(location.hash).data()[0]);\r\n            }\r\n        };\r\n\r\n        d3.select(window).on(\"load\", initialHashCheck);\r\n    };\r\n\r\n    api.config = function(value) {\r\n        if (!arguments.length) return config;\r\n        config = value;\r\n        return api;\r\n    };\r\n\r\n    api.chartSelector = function(selector) {\r\n        if (!arguments.length) return chartSelector;\r\n        chartSelector = selector;\r\n        return api;\r\n    };\r\n\r\n    api.infoSelector = function(selector) {\r\n        if (!arguments.length) return infoSelector;\r\n        infoSelector = selector;\r\n        return api;\r\n    };\r\n\r\n    api.filters = function(value) {\r\n        if (!arguments.length) return filters;\r\n        filters = value;\r\n        return api;\r\n    };\r\n\r\n    return api;\r\n};"],"sourceRoot":"/source/"}